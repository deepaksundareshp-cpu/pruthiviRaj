/* 1. Base Styles & Typography */
body, html { 
    background-color: #000; 
    margin: 0; 
    padding: 0; 
    height: 100vh; 
    width: 100vw; 
    overflow: hidden; 
    font-family: 'Caveat', cursive; 
    color: #fff;
}

/* 2. Celestial Background Elements */
#nebula { 
    position: fixed; 
    inset: -25vh -25vw; 
    width: 150vw; 
    height: 150vh; 
    background: radial-gradient(circle at 20% 30%, rgba(138, 43, 226, 0.4), transparent 50%), 
                radial-gradient(circle at 80% 70%, rgba(0, 191, 255, 0.3), transparent 50%);
    filter: blur(80px); 
    z-index: -2; 
    transition: all 5s ease;
}

#nebula.intense {
    background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.7), transparent 40%),
                radial-gradient(circle at 20% 20%, #ff4500, transparent 60%);
}

.static-star {
    position: absolute; 
    background: white; 
    border-radius: 50%;
    z-index: -1; 
    opacity: 0.5;
    animation: twinkle var(--twinkle-duration) infinite ease-in-out;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
}

/* 3. Opening Sequence (Envelope & Paper) */
.white-overlay { 
    position: fixed; 
    inset: 0; 
    z-index: 9999; 
    background: #fff; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    cursor: pointer; 
}

.paper-half { 
    position: fixed; 
    top: 0; 
    width: 50.5%; 
    height: 100%; 
    background: #fff; 
    z-index: 9998; 
    transition: transform 1.5s ease-in-out; 
}

#paper-left { left: 0; border-right: 1px solid #ddd; }
#paper-right { right: 0; border-left: 1px solid #ddd; }

.rip-left { transform: translateX(-100%); }
.rip-right { transform: translateX(100%); }

/* 4. Text Container & Scrolling Logic */
.content-box { 
    position: fixed; 
    top: 55%; /* Starting position slightly below middle */
    left: 50%; 
    transform: translate(-50%, -50%);
    z-index: 10; 
    text-align: center; 
    width: 90%; 
    max-width: 800px; 
    pointer-events: none; /* Allows mouse effects to work through the text */
}

#typed-text { 
    transition: transform 1s ease-in-out; 
    display: inline-block;
}

.message { 
    font-size: 1.7rem; 
    line-height: 1.8; 
}

/* 5. The Letter Glow Effect */
.letter { 
    transition: opacity 2.5s ease; 
    display: inline-block; 
    white-space: pre;
    color: #fff;
    /* Soft Light Blue/Cyan Glow */
    text-shadow: 0 0 10px rgba(0, 212, 255, 0.9), 
                 0 0 20px rgba(0, 212, 255, 0.4);
}

.fade-out { 
    opacity: 0 !important; 
}

/* 6. Mouse Stardust Effect */
.cursor-particle {
    position: fixed; 
    width: 4px; 
    height: 4px; 
    background: white;
    border-radius: 50%; 
    pointer-events: none; 
    z-index: 9999;
    box-shadow: 0 0 10px #fff, 0 0 15px #00fbff;
    animation: particleFade 1.2s ease-out forwards;
}

@keyframes particleFade {
    0% { transform: translate(0, 0) scale(1); opacity: 1; }
    100% { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; }
}

/* 7. Shooting Stars & Finale */
.shooting-star { 
    position: fixed; 
    z-index: 100; 
    pointer-events: none; 
}

.heavy-meteor {
    position: fixed; 
    width: 55px; 
    height: 55px;
    background: radial-gradient(circle at 30% 30%, #fff, #ffae00 40%, #000);
    border-radius: 50%; 
    box-shadow: 0 0 70px #ff4500; 
    z-index: 2000;
}

#big-bang-element {
    position: fixed; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%) scale(0);
    width: 30px; 
    height: 30px; 
    border-radius: 50%; 
    background: #fff;
    box-shadow: 0 0 100px 50px #fff, 
                0 0 500px 200px #00fbff, 
                0 0 800px 400px #ff00ff;
    z-index: 2001; 
    opacity: 0;
}

.bang-active { 
    animation: cinematicExplosion 4s forwards; 
}

@keyframes cinematicExplosion {
    0% { transform: translate(-50%,-50%) scale(0); opacity:1; }
    100% { transform: translate(-50%,-50%) scale(1000); opacity:0; }
}

/* Utilities */
.hidden { 
    display: none !important; 
}
